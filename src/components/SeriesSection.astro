---
import type { CollectionEntry } from "astro:content";
import { SeriesGroup } from "~/utils";

interface Props {
	posts: CollectionEntry<"blog">[];
}

const { posts } = Astro.props;

const seriesGroup = await SeriesGroup.build(posts);
---

<ul class="flex flex-wrap gap-x-2 gap-y-2 my-5 px-3 text-xs">
  {
    seriesGroup.sortCollationsMostRecent().map((series) => (
      <li>
        <a
          href={series.url}
          class="flex items-center gap-2.5 pl-2 bg-transparent text-foreground border border-accent"
        >
          {series.title}
          <span class="bg-accent text-background py-2 px-3">{series.entries.length}</span>
        </a>
      </li>
    ))
  }
</ul>
